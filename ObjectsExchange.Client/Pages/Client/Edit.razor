@page "/client/edit/{id?}"
@attribute [Authorize]
@rendermode InteractiveWebAssembly


<SabatexEditForm TItem="Models.Client" TKey="Guid" Item="Item" OnBeforeSubmit="OnBeforeSubmit" IsNew="@(Id==null)">
    <Content Context="item">
        <RadzenColumn Size="12" SizeMD="8" SizeLG="10">
            <RadzenFormField Text="Description" Style="width:100%">
                <RadzenTextBox @bind-Value="item.Description" Name="Description" class="w-100" />
            </RadzenFormField>

        </RadzenColumn>

    </Content>
</SabatexEditForm>

@code {
    [Parameter]
    public string? Id { get; set; }


    Models.Client? Item;

    async Task OnBeforeSubmit(Models.Client item)
    {
        if (Id == null)
            item.UserId = await AuthenticationStateProvider.GetUserIdAsync();
    }


    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        if (Id != null)
        {
            Item = await DataAdapter.GetByIdAsync<Models.Client>(Id);
        }
        else
        {
            Item = new Models.Client();
        }


    }

}
