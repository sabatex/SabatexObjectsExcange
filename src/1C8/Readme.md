# Exchange Service

## Налаштування розширення конфігурації сервісу обміну обміну.

1. Завантажити останній реліз розширення [sabatexPactumContragent.1.0.1.cfe](https://github.com/sabatex/Pactum/releases/download/v1.0.1/sabatexPactumContragent.1.0.1.cfe)
2. Запустити конфігуратор BAS.
3. Перейти до меню розширень -> Конфігурація/Розширення конфігурації
4. Додати нове розширення (вказавши призначення Адаптація). Зачекати створення розширення ... ![Зображення нового розширення](/images/new%201c8%20extensions.png)
5. Вибрати дане розширення. Дії/Конфігурація/Завантажити конфігурацію з файлу...
6. Підтвердити зміни.
![Попередження](/images/warning%20change%20config.png)
7. Підтвердити оновлення.
![Попередження](/images/update%20config.png)
8. Зняти галочку **Безпечний режим** 
![Параметри розширення](/images/Configure%20extension.png)

### Налаштування зєднання

1. Відкртваємо Sabatex Exchange/Налаштування обміну.
2. На закладці "Налаштування Зєднання" заповнюємо Client id та Password.
3. На закладці "Ноди обміну" додаємо нод з яким ми будемо проводити обмін.
    - Node Name : назва нода призначення (в конфігураторі використовується при реєстрації робєкта для оюміну)
    - Destination Id : Id нода з яким буде проводитись обмін.
    - Is Active : можна відключати обмін з нодом.
    - Take : кількість обєктів які обробляються в одній транзакції обміну. (занадто велика кількількість може призвести до проблем повязаних з розміром HTTP пакету )
    - LogLevel (рівень запису логів 0,1,2,3..9, чим більше число тим більше логів)
    - Update catalogs : (для логіки парсера).
    - Incoming parser: назва процедури якій будуть передаватись обєкти для імпорта
    - Use object cashe : (для логіки парсера)
    - Підтримка запитів: Признак чи буде система відповідати на запити обєктів (підтримується запити обєктів (довідник,документ) по Id, та довільний запит визначаєми користувачем ExtensionQueryFunction)

### В конфігурації

    - SabatexExchange.ExchangeProcess() - запуск сесії обміну (можна налаштувати виклик в Регламентних завданнях )
    - В підписках на події потрібно підписатьсь на момент запису (документа,довідника) та викликати метод SabatexExchange.RegisterObjectForNode(Source,"{DestinationNodeName}")
    